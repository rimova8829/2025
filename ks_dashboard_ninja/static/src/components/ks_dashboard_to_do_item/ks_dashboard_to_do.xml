<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="ks_dashboard_ninja.to_do_renderer">
        <div t-if="state.config" class="dn-todo">
            <KsItemButton t-if="!props.isPreview" itemComponent.alike="constructor" itemConfig="state.config" rootClasses.alike="''"
                          fetchOrUpdateItem.bind.alike="() => this.fetchOrUpdateItem(this.props)"
                          isDashboardManager.alike="state.config.ks_dashboard_manager" dnStore="props.dnStore"
                          allDashboardLists.alike="props.dashboardData.ks_dashboard_list"
                          itemBasicDataFields.alike="props.dashboardData.item_basic_data_fields"
                          resetChart.alike="resetChart"/>

            <t t-call="ks_dashboard_ninja.to_do_header_section"/>
            <t t-call="ks_dashboard_ninja.to_do_body_section"/>
        </div>
        <t t-else="" t-call="graph_skeleton"/>
    </t>

    <t t-name="ks_dashboard_ninja.to_do_header_section">
        <div class="top-section" t-att-style="bgColorStyle">

            <div class="todo-name w-50" t-esc="state.config.name" t-att-style="fontColorStyle" t-att-data-tooltip="state.config.name"/>

            <div class="todos-container d-flex justify-content-between align-items-center">
                <ul class="nav todo-content nav-pills nav-justified ps-0" role="tablist" data-tabs="tabs">
                    <li t-foreach="state.config.ks_to_do_data" t-as="header_line" t-key="header_line_index" >
                        <a t-att-class="state.activeHeaderTabIndex === header_line_index ? 'active' : ''"
                           t-on-click.prevent="() => this.changeHeaderLine(header_line_index)"
                           t-esc="header_line.ks_to_do_header" t-att-style="fontColorStyle"/>
                    </li>
                </ul>
                <div t-if="!props.isFormPreview">
                    <button class="add-icon" t-on-click.stop="addDescriptionLine">
                        <t t-call="todo_add_description"/>
                    </button>
                </div>
            </div>
        </div>
    </t>

    <t t-name="todo_add_description">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M8 12H16" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 16V8" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </t>

    <t t-name="ks_dashboard_ninja.to_do_body_section">
        <div class="bottom-section">
            <div class="table-responsive custom-dn-table">
                <table class="table">
                    <tbody>
                        <t t-set="description_lines" t-value="state.config.ks_to_do_data[state.activeHeaderTabIndex]?.ks_to_do_description_lines"/>
                        <t t-if="description_lines">
                            <tr t-foreach="description_lines" t-as="description_line" t-key="description_line_index">
                                <td t-if="!props.isFormPreview">
                                    <div class="custom-dn-checkbox">
                                        <input type="checkbox" t-att-checked="description_line.ks_active"
                                               t-on-input="() => this.toggleActive(description_line)"/>
                                    </div>
                                </td>
                                <td>
                                    <div class="todo-description" t-esc="description_line.ks_description"
                                         t-att-class="{'text-decoration-line-through': description_line.ks_active}"/>
                                </td>
                                <td t-if="!props.isFormPreview">
                                    <t t-call="ks_dashboard_ninja.todo_action_buttons"/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
    </t>

    <t t-name="ks_dashboard_ninja.todo_action_buttons">
        <div class="d-flex gap-4 align-items-center justify-content-end">
            <button class="edit-btn" t-on-click.stop="() => this.editDescriptionLine(description_line)">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.33398 1.3335H6.00065C2.66732 1.3335 1.33398 2.66683 1.33398 6.00016V10.0002C1.33398 13.3335 2.66732 14.6668 6.00065 14.6668H10.0007C13.334 14.6668 14.6673 13.3335 14.6673 10.0002V8.66683" stroke="#292D32" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M10.6933 2.0135L5.43992 7.26684C5.23992 7.46684 5.03992 7.86017 4.99992 8.14684L4.71325 10.1535C4.60659 10.8802 5.11992 11.3868 5.84659 11.2868L7.85325 11.0002C8.13325 10.9602 8.52659 10.7602 8.73325 10.5602L13.9866 5.30684C14.8933 4.40017 15.3199 3.34684 13.9866 2.0135C12.6533 0.680168 11.5999 1.10684 10.6933 2.0135Z" stroke="#292D32" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M9.93945 2.7666C10.3861 4.35994 11.6328 5.6066 13.2328 6.05994" stroke="#292D32" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <button class="dlt-btn" t-on-click.stop="() => this.deleteDescriptionLine(description_line)">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 3.98665C11.78 3.76665 9.54667 3.65332 7.32 3.65332C6 3.65332 4.68 3.71999 3.36 3.85332L2 3.98665" stroke="#292D32" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M5.66602 3.3135L5.81268 2.44016C5.91935 1.80683 5.99935 1.3335 7.12602 1.3335H8.87268C9.99935 1.3335 10.086 1.8335 10.186 2.44683L10.3327 3.3135" stroke="#292D32" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12.5669 6.09326L12.1336 12.8066C12.0603 13.8533 12.0003 14.6666 10.1403 14.6666H5.86026C4.00026 14.6666 3.94026 13.8533 3.86693 12.8066L3.43359 6.09326" stroke="#292D32" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M6.88672 11H9.10672" stroke="#292D32" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M6.33398 8.3335H9.66732" stroke="#292D32" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </t>

</templates>